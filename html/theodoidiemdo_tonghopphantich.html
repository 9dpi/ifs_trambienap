<!DOCTYPE html>
<html lang="vi" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFS - AI | Tổng hợp phân tích</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive-fixes.css">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        .tabs-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 1px;
        }

        .tab-item {
            padding: 12px 24px;
            cursor: pointer;
            color: var(--text-sub);
            font-weight: 600;
            font-size: 14px;
            transition: 0.3s;
            border-bottom: 3px solid transparent;
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px 8px 0 0;
        }

        .tab-item:hover {
            color: var(--primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chart-box {
            padding: 24px;
            min-height: 480px;
            background: rgba(255, 255, 255, 0.01);
            border-radius: 12px;
            margin-top: 10px;
        }

        /* NEW HORIZONTAL FILTER STYLE */
        .filter-section-modern {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 25px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .filter-row-inline {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-end;
            gap: 16px;
        }

        .filter-group-inline {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
            flex: unset;
        }

        .filter-group-inline label {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-sub);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        /* Multi-select box looking like an input */
        .multi-select-box {
            background: var(--bg-body);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 4px 8px;
            min-height: 38px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            cursor: pointer;
            transition: 0.2s;
            min-width: 150px;
        }

        .multi-select-box:hover {
            border-color: var(--primary);
        }

        .tags-list {
            display: flex;
            flex-wrap: nowrap;
            gap: 6px;
            overflow: hidden;
            position: relative;
            flex: 1;
            /* Optional: Add a fade effect to the right */
            mask-image: linear-gradient(to right, black 85%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%);
        }

        .tag-pill {
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            white-space: nowrap;
        }

        .tag-pill i {
            color: var(--text-sub);
            cursor: pointer;
            font-style: normal;
            font-size: 16px;
            line-height: 1;
            margin-top: -1px;
        }

        .tag-pill i:hover {
            color: var(--danger);
        }

        .select-single-modern {
            background: var(--bg-body);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 14px;
            color: var(--text-main);
            outline: none;
            cursor: pointer;
            min-height: 38px;
        }

        .date-range-box {
            display: flex;
            align-items: center;
            background: var(--bg-body);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0 12px;
            height: 38px;
            gap: 10px;
        }

        .date-range-box svg {
            color: var(--primary);
            flex-shrink: 0;
        }

        .date-range-box input {
            background: transparent;
            border: none;
            color: var(--text-main);
            font-size: 14px;
            width: 165px;
            outline: none;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Style datetime-local calendar icon */
        input[type="datetime-local"]::-webkit-calendar-picker-indicator {
            filter: invert(1) brightness(0.9);
            cursor: pointer;
        }

        .btn-search-primary {
            background: #3B82F6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0 24px;
            height: 38px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
        }

        .btn-search-primary:hover {
            background: #2563EB;
            transform: translateY(-1px);
        }

        .btn-icon-square {
            width: 38px;
            height: 38px;
            border: 1px solid var(--border);
            background: var(--bg-body);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-sub);
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-icon-square:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .summary-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-main);
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
        }

        .status-unprocessed {
            background: rgba(239, 68, 68, 0.1);
            color: #EF4444;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        /* Dropdown with checkboxes */
        .dropdown-check-list {
            position: relative;
        }

        .dropdown-check-list .items {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-height: 250px;
            overflow-y: auto;
            margin-top: 4px;
        }

        .dropdown-check-list.visible .items {
            display: block;
        }

        .dropdown-item-check {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
            transition: 0.2s;
            color: var(--text-main);
            font-size: 13px;
        }

        .dropdown-item-check:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .dropdown-item-check input {
            cursor: pointer;
            accent-color: var(--primary);
        }

        /* Export Dropdown */
        .export-dropdown {
            position: relative;
            display: inline-block;
        }

        .btn-export {
            background: var(--success);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0 16px;
            height: 38px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.2);
        }

        .btn-export:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .export-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 0;
            min-width: 180px;
            z-index: 1001;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            margin-top: 8px;
            animation: fadeIn 0.2s ease;
        }

        .export-dropdown.open .export-menu {
            display: block;
        }

        .export-item {
            padding: 10px 16px;
            color: var(--text-main);
            font-size: 13px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .export-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--primary);
        }

        /* AVG and Filter styles */
        .header-tools {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avg-dropdown {
            background: #111827;
            border: 1px solid var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            padding: 2px 8px;
            gap: 8px;
            height: 34px;
        }

        .avg-tag {
            background: rgba(16, 185, 129, 0.1);
            color: #10B981;
            font-size: 10px;
            font-weight: 800;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .avg-select {
            background: transparent;
            border: none;
            color: var(--text-main);
            font-size: 13px;
            font-weight: 600;
            outline: none;
            cursor: pointer;
            padding-right: 4px;
        }

        .filter-badge-simple {
            background: #111827;
            border: 1px solid var(--border);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-main);
            cursor: pointer;
            height: 34px;
            font-weight: 600;
        }

        .badge-count {
            background: #3B82F6;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <div style="display:flex; align-items:center">
            <button class="mobile-btn" onclick="toggleMobileMenu()">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
            </button>
            <a href="dashboard.html" class="brand" style="text-decoration:none">
                <div class="logo-box">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>
                    </svg>
                </div> IFS - TRẠM BIẾN ÁP
            </a>
        </div>

        <div class="nav-menu" id="mainMenu">
            <div class="nav-wrapper"><a href="dashboard.html" class="nav-link">TRANG CHỦ</a></div>
            <div class="nav-wrapper"><a href="giamsattructiep.html" class="nav-link">GIÁM SÁT TRỰC TIẾP</a></div>
            <div class="nav-wrapper">
                <div class="nav-link active-link">THEO DÕI ĐIỂM ĐO <svg class="nav-arrow" width="10"
                        viewBox="0 0 24 24">
                        <path d="M7 10l5 5 5-5z" />
                    </svg></div>
                <div class="dropdown-menu">
                    <a href="theodoidiemdo_canhbaoai.html" class="menu-link">Cảnh báo AI</a>
                    <a href="theodoidiemdo_canhbao.html" class="menu-link">Nhiệt độ vượt ngưỡng</a>
                    <a href="theodoidiemdo_nhatkynhietdo.html" class="menu-link">Nhật ký nhiệt độ</a>
                    <a href="theodoidiemdo_tonghopphantich.html" class="menu-link active-link">Tổng hợp phân tích</a>
                </div>
            </div>
            <div class="nav-wrapper">
                <div class="nav-link">QUẢN TRỊ HỆ THỐNG <svg class="nav-arrow" width="10" viewBox="0 0 24 24">
                        <path d="M7 10l5 5 5-5z" />
                    </svg></div>
                <div class="dropdown-menu mega-menu">
                    <div class="mega-col">
                        <div class="col-header">HẠ TẦNG & THIẾT BỊ</div>
                        <a href="quantrihethong_khuvuc.html" class="menu-link">Khu vực</a>
                        <a href="quantrihethong_camera.html" class="menu-link">Camera</a>
                        <a href="quantrihethong_cambien.html" class="menu-link">Cảm biến</a>
                        <a href="quantrihethong_loaithietbi.html" class="menu-link">Loại Thiết bị</a>
                        <a href="quantrihethong_thietbi.html" class="menu-link">Thiết bị</a>
                    </div>
                    <div class="mega-col">
                        <div class="col-header">THIẾT LẬP CẢNH BÁO</div>
                        <a href="thietlapcanhbao_kenhcanhbao.html" class="menu-link">Kênh Cảnh báo</a>
                        <a href="theodoidiemdo_bocanhbao.html" class="menu-link">Bộ cảnh báo</a>
                    </div>
                    <div class="mega-col">
                        <div class="col-header">QUẢN LÝ NGƯỜI DÙNG</div>
                        <a href="quantrihethong_nguoidung.html" class="menu-link">Người dùng</a>
                        <a href="#" class="menu-link">Hướng dẫn sử dụng</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="header-actions">
            <div class="theme-switch" onclick="toggleTheme()">
                <div class="switch-knob"></div>
            </div>
            <div
                style="width:32px; height:32px; background:#E5E7EB; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; color:#4B5563">
                A</div>
        </div>
    </nav>

    <div class="container">
        <div class="bread-crumb">Theo dõi điểm đo / <span>Tổng hợp phân tích</span></div>

        <div class="tabs-container">
            <div class="tab-item active" onclick="switchMainTab(0)">Nhật ký nhiệt độ theo điểm đo</div>
            <div class="tab-item" onclick="switchMainTab(1)">Thống kê số lượng cảnh báo</div>
        </div>

        <!-- TAB 1: NHẬT KÝ NHIỆT ĐỘ -->
        <div id="tabDiary" class="tab-content active">
            <div class="card" style="padding: 20px;">
                <div class="summary-header">
                    <div class="summary-title">Nhật ký nhiệt độ theo điểm đo</div>
                    <div class="header-tools">
                        <div class="avg-dropdown">
                            <span class="avg-tag">AVG</span>
                            <select class="avg-select">
                                <option>Trung bình</option>
                                <option>Lớn nhất</option>
                                <option>Nhỏ nhất</option>
                            </select>
                        </div>
                        <div class="filter-badge-simple">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5">
                                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                            </svg>
                            Bộ lọc <span class="badge-count">4</span>
                        </div>
                    </div>
                </div>

                <div class="filter-section-modern">
                    <div class="filter-row-inline">
                        <div class="filter-group-inline">
                            <label>Khu vực</label>
                            <div class="dropdown-check-list" id="regionSelect" style="width: 220px;">
                                <div class="multi-select-box" onclick="toggleDropdown('regionSelect')">
                                    <div class="tags-list">
                                        <div class="tag-pill">Trạm Phú Quốc <i>&times;</i></div>
                                    </div>
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M6 9l6 6 6-6" />
                                    </svg>
                                </div>
                                <div class="items">
                                    <label class="dropdown-item-check"><input type="checkbox" checked> Trạm Phú
                                        Quốc</label>
                                    <label class="dropdown-item-check"><input type="checkbox"> Trạm Liên Trì</label>
                                    <label class="dropdown-item-check"><input type="checkbox"> Biển đảo</label>
                                    <label class="dropdown-item-check"><input type="checkbox"> Công ty</label>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group-inline">
                            <label>Thiết bị</label>
                            <div class="multi-select-box" style="width: 120px;">
                                <div class="tags-list">
                                    <div class="tag-pill">112 <i>&times;</i></div>
                                </div>
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M6 9l6 6 6-6" />
                                </svg>
                            </div>
                        </div>
                        <div class="filter-group-inline">
                            <label>Bộ phận</label>
                            <div style="display: flex; gap: 8px; align-items: center;">
                                <div class="dropdown-check-list" id="componentSelect" style="width: 320px;">
                                    <div class="multi-select-box" onclick="toggleDropdown('componentSelect')">
                                        <div class="tags-list">
                                            <div class="tag-pill">MC112 - AI <i>&times;</i></div>
                                            <div class="tag-pill">MC112 - BI <i>&times;</i></div>
                                            <div class="tag-pill">MC112 - CI <i>&times;</i></div>
                                            <div class="tag-pill">MC112 - DI <i>&times;</i></div>
                                        </div>
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M6 9l6 6 6-6" />
                                        </svg>
                                    </div>
                                    <div class="items">
                                        <label class="dropdown-item-check"><input type="checkbox" checked> MC112 -
                                            AI</label>
                                        <label class="dropdown-item-check"><input type="checkbox" checked> MC112 -
                                            BI</label>
                                        <label class="dropdown-item-check"><input type="checkbox" checked> MC112 -
                                            CI</label>
                                        <label class="dropdown-item-check"><input type="checkbox" checked> MC112 -
                                            DI</label>
                                        <label class="dropdown-item-check"><input type="checkbox"> MC112 - EI</label>
                                        <label class="dropdown-item-check"><input type="checkbox"> MC112 - FI</label>
                                    </div>
                                </div>
                                <div class="btn-icon-square" title="Cấu hình danh sách">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <circle cx="12" cy="12" r="3"></circle>
                                        <path
                                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                        </path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group-inline">
                            <label>Khoảng thời gian</label>
                            <div style="display: flex; gap: 8px;">
                                <select class="select-single-modern" style="width: 120px;">
                                    <option>Tùy chọn</option>
                                    <option>Hôm nay</option>
                                    <option>Hôm qua</option>
                                </select>
                                <div class="date-range-box">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    <input type="text" value="2026-01-26 00:00:00"
                                        style="width: 130px; font-size: 12px;">
                                    <span style="color:var(--text-sub)">-</span>
                                    <input type="text" value="2026-01-28 10:33:10"
                                        style="width: 130px; font-size: 12px;">
                                </div>
                            </div>
                        </div>
                        <button class="btn-search-primary" style="margin-bottom: 0;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            TÌM KIẾM
                        </button>
                    </div>
                </div>

                <div class="chart-box">
                    <div id="temperatureChart"></div>
                </div>
            </div>
        </div>

        <!-- TAB 2: THỐNG KÊ CẢNH BÁO -->
        <div id="tabStats" class="tab-content">
            <div class="card" style="padding: 20px;">
                <div class="summary-header">
                    <div class="summary-title">Thống kê số lượng cảnh báo</div>
                </div>

                <div class="filter-section-modern">
                    <div class="filter-row-inline">
                        <div class="filter-group-inline">
                            <label>Khu vực</label>
                            <select class="select-single-modern" style="width: 220px;">
                                <option>Tất cả khu vực</option>
                                <option>Trạm 110kV Nam Phú Quốc</option>
                            </select>
                        </div>
                        <div class="filter-group-inline">
                            <label>Từ ngày</label>
                            <input type="datetime-local" class="select-single-modern" value="2026-01-30T00:00">
                        </div>
                        <div class="filter-group-inline">
                            <label>Đến ngày</label>
                            <input type="datetime-local" class="select-single-modern" value="2026-02-06T09:54">
                        </div>
                        <button class="btn-search-primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            TÌM KIẾM
                        </button>

                        <div class="export-dropdown" id="exportDropdown">
                            <button class="btn-export" onclick="toggleExport()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                Download
                            </button>
                            <div class="export-menu">
                                <div class="export-item">Download SVG</div>
                                <div class="export-item">Download PDF</div>
                                <div class="export-item">Download CSV</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-box">
                    <div id="alertStatsChart"></div>
                </div>
            </div>
        </div>



    </div>

    <script src="js/main.js"></script>
    <script src="js/responsive-helpers.js"></script>
    <script>


        // CHART 1: LINE CHART (Temperature)
        var lineOptions = {
            series: [
                { name: 'Phha A (112_AI)', data: [26, 27, 26, 28, 38, 42, 45, 41, 40, 31, 28, 27, 26, 27, 25, 27, 26, 28, 37, 46, 43, 38, 29, 27, 26, 27, 26, 32] },
                { name: 'Pha B (112_BI)', data: [26, 26, 27, 27, 34, 39, 41, 38, 39, 29, 26, 26, 27, 26, 25, 26, 28, 33, 41, 44, 42, 36, 28, 26, 26, 26, 27, 34] },
                { name: 'Pha C (112_CI)', data: [25, 25, 26, 26, 31, 36, 38, 36, 37, 27, 25, 25, 26, 25, 24, 25, 26, 30, 38, 40, 39, 34, 27, 25, 25, 25, 26, 35] },
                { name: 'Nhiệt độ Môi trường', data: [24, 24, 25, 24, 28, 29, 28, 27, 26, 24, 24, 24, 25, 24, 23, 24, 25, 26, 27, 27, 25, 25, 24, 23, 24, 24, 25, 30] }
            ],
            chart: {
                height: 450,
                type: 'area',
                background: 'transparent',
                toolbar: { show: false },
                animations: { enabled: true, easing: 'easeinout', speed: 800 }
            },
            colors: ['#3B82F6', '#10B981', '#F59E0B', '#EF4444'],
            stroke: { curve: 'smooth', width: 3 },
            fill: {
                type: 'gradient',
                gradient: { shadeIntensity: 1, opacityFrom: 0.4, opacityTo: 0.05, stops: [0, 90, 100] }
            },
            markers: { size: 0, hover: { size: 5 } },
            xaxis: {
                categories: ['00:00', '01:00', '02:00', '03:00', '08:00', '10:00', '12:00', '14:00', '16:00', '18:00', '20:00', '22:00', '00:00', '02:00', '04:00', '06:00', '08:00', '10:00', '12:00', '14:00', '16:00', '18:00', '20:00', '22:00', '00:00', '02:00', '04:00', '09:00'],
                labels: { style: { colors: '#94A3B8', fontSize: '12px' } },
                axisBorder: { show: false },
                axisTicks: { show: false }
            },
            yaxis: {
                labels: {
                    style: { colors: '#94A3B8', fontSize: '12px' },
                    formatter: (v) => v.toFixed(1) + "°C"
                },
                title: { text: 'Nhiệt độ (°C)', style: { color: '#94A3B8', fontWeight: 600 } }
            },
            grid: { borderColor: 'rgba(255,255,255,0.05)', strokeDashArray: 4 },
            legend: {
                position: 'top',
                horizontalAlign: 'right',
                offsetY: -10,
                labels: { colors: '#94A3B8' },
                markers: { radius: 12 }
            },
            theme: { mode: 'dark' },
            tooltip: { x: { show: true }, theme: 'dark' }
        };

        var lineChart = new ApexCharts(document.querySelector("#temperatureChart"), lineOptions);
        lineChart.render();

        // CHART 2: BAR CHART (Alert Stats)
        var barOptions = {
            series: [{
                name: 'Số lượng cảnh báo',
                data: [44, 55, 41, 67, 22, 43, 21, 33, 45, 13, 27, 33]
            }],
            chart: {
                type: 'bar',
                height: 450,
                background: 'transparent',
                toolbar: { show: false }
            },
            plotOptions: {
                bar: {
                    borderRadius: 4,
                    columnWidth: '45%',
                    distributed: true,
                    dataLabels: { position: 'top' }
                }
            },
            dataLabels: {
                enabled: true,
                formatter: function (val) { return val; },
                offsetY: -20,
                style: { fontSize: '12px', colors: ["#94A3B8"] }
            },
            colors: ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899', '#06B6D4', '#F43F5E', '#14B8A6', '#F97316', '#6366F1', '#D946EF'],
            legend: { show: false },
            xaxis: {
                categories: ["MC112", "MC131", "T172", "T132", "MBA T1", "MBA T2", "DCL 171-1", "DCL 172-2", "TuC11", "TuC12", "T63", "C41"],
                labels: { style: { colors: '#94A3B8', fontSize: '12px' } },
                axisBorder: { show: false },
                axisTicks: { show: false }
            },
            yaxis: {
                labels: { style: { colors: '#94A3B8' } },
                title: { text: 'Số lượng (Lần)', style: { color: '#94A3B8', fontWeight: 600 } }
            },
            grid: { borderColor: 'rgba(255,255,255,0.05)', strokeDashArray: 4 },
            tooltip: { theme: 'dark' }
        };

        var barChart = new ApexCharts(document.querySelector("#alertStatsChart"), barOptions);
        barChart.render();

        function switchMainTab(index) {
            const contents = document.querySelectorAll('.tab-content');
            const items = document.querySelectorAll('.tab-item');

            contents.forEach(c => c.classList.remove('active'));
            items.forEach(i => i.classList.remove('active'));

            contents[index].classList.add('active');
            items[index].classList.add('active');

            // Trigger resize to fix chart drawing issues in hidden tabs
            window.dispatchEvent(new Event('resize'));
        }

        function toggleDropdown(id) {
            document.getElementById(id).classList.toggle('visible');
            event.stopPropagation();
        }

        function toggleExport() {
            document.getElementById('exportDropdown').classList.toggle('open');
            event.stopPropagation();
        }

        // Close dropdowns when clicking outside
        window.onclick = function (event) {
            if (!event.target.closest('.dropdown-check-list')) {
                document.querySelectorAll('.dropdown-check-list').forEach(d => d.classList.remove('visible'));
            }
            if (!event.target.closest('.export-dropdown')) {
                document.querySelectorAll('.export-dropdown').forEach(d => d.classList.remove('open'));
            }
        }

        // DEMO INTERACTION FOR MULTI-SELECT
        document.querySelectorAll('.multi-select-box').forEach(box => {
            box.addEventListener('click', function (e) {
                if (e.target.closest('i')) {
                    // Handle remove tag
                    e.target.closest('.tag-pill').remove();
                    e.stopPropagation(); // Don't toggle dropdown when clicking X
                    return;
                }
            });
        });
    </script>
</body>

</html>